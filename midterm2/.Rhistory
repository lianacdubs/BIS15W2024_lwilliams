library(janitor)
options(scipen=999) #cancels the use of scientific notation for the session
homerange <- read_csv("data/Tamburelloetal_HomeRangeDatabase.csv", na = c("", "NA", "\\"))
p <- homerange %>%
ggplot(aes(x=taxon, fill=trophic.guild))+
geom_bar(na.rm=T, position="dodge")
#store a plot as an object!
colors <- paletteer::palettes_d_names
my_palette <- paletteer_d("ggsci::nrc_npg") #store your palette
#remove ggsi and then add package and palettes as provided above
#nrc is equal to package and palette is npg
barplot(rep(1,6), axes=FALSE, col=my_palette)
p+scale_fill_manual(values=my_palette)+
theme(legend.position = "bottom",
axis.text.x = element_text(angle = 60, hjust=1))+
labs(title = "Observations by Taxon in Homerange Data",
x = NULL,
y= "n",
fill= "Trophic Guild")
knitr::opts_chunk$set(echo = TRUE)
library("tidyverse")
library("janitor")
library("naniar")
library("tidyverse")
library("janitor")
library("naniar")
surgery <- read_csv("data/surgery.csv")
surgery <- read_csv("data/surgery.csv")
glimpse(surgery)
is.na(surgery)
tabyl(surgery)
table(surgery)
miss_var_summary(surgery)
surgery %>%
map_df(~ sum(is.na(.)))
names(surgery)
surgery %>%
count(race)
ggplot(data=surgery, #specify the data
mapping=aes(x=race, y=n))+ #map the aesthetics
geom_boxplot()
surgery %>%
ggplot(aes(x=race)) + #there is only one variable in this plot. noteL the x= is not needed.
geom_bar()
surgery %>%
naniar::miss_var_summary()
surgery %>%
ggplot(aes(x=race, fill=race))+ #there is only one variable in this plot. noteL the x= is not needed.
geom_bar(alpha=0.6, color="steelblue3")+
labs(title = "Participants by Race", x=NULL, y= "# of Participants")+
theme_light()
surgery %>%
ggplot(aes(x=race, fill=race))+ #there is only one variable in this plot. noteL the x= is not needed.
geom_bar(alpha=0.6, color="black")+
labs(title = "Participants by Race", x=NULL, y= "# of Participants")+
theme_light()
surgery %>%
filter(gender!="NA") %>%  #remove the participants who have not indicated gender
group_by(gender) %>%
summarize(mean_age = mean(age, na.rm = T))
surgery %>%
ggplot(aes(x = age, y = gender)) +
geom_boxplot()
surgery %>%
filter(gender!="NA") %>%
ggplot(aes(x=gender, y=age, fill=gender))+
geom_boxplot(na.rm = T, alpha=0.6)+#good for range
labs(title = "Range of Participants Age by Gender",
x=NULL,
y="Age (years)")+
theme_light()
surgery %>%
filter(asa_status!="NA") %>%
ggplot(aes(x=asa_status, fill=asa_status))+
geom_bar(color="black", alpha=0.6)+
labs(title = "ASA Status of Participants", x = "ASA", y="# Participants")+
theme_light()
surgery %>%
#filter(asa_status!="NA") %>%
ggplot(aes(x=asa_status, fill=asa_status))+
geom_bar(color="black", alpha=0.6)+
labs(title = "ASA Status of Participants", x = "ASA", y="# Participants")+
theme_light()
surgery %>%
filter(asa_status!="NA") %>%
ggplot(aes(x=asa_status, fill=asa_status))+
geom_bar(color="black", alpha=0.6)+
labs(title = "ASA Status of Participants", x = "ASA", y="# Participants")+
theme_light()
surgery %>%
#filter(asa_status!="NA") %>%
ggplot(aes(x=asa_status, fill=asa_status))+
geom_bar(color="black", alpha=0.6)+
labs(title = "ASA Status of Participants", x = "ASA", y="# Participants")+
theme_light()
surgery %>%
filter(asa_status!="NA") %>%
ggplot(aes(x=asa_status, fill=asa_status))+
geom_bar(color="black", alpha=0.6)+
labs(title = "ASA Status of Participants", x = "ASA", y="# Participants")+
theme_light()
View(surgery)
surgery %>%
ggplot(aes(x=asa_status, y=bmi))+
geom_boxplot()+
facet_wrap(~bmi) #new ; split the plot into two automatically in columns
surgery %>%
ggplot(aes(x=asa_status))+
geom_density(fill="steelblue", color="black", alpha=0.6, na.rm = T)+
facet_wrap(~asa_status)+ #new ; split the plot into two automatically in columns
labs(title = "Distribution of BMI", x="BMI", y=NULL)+
theme_light()+
theme(axis.text.x = element_text(angle = 60, hjust=1))
surgery %>%
ggplot(aes(x=asa_status))+
geom_density(fill="steelblue", color="black", alpha=0.6, na.rm = T)+
facet_wrap(~asa_status)+ #new ; split the plot into two automatically in columns
labs(title = "Distribution of BMI", x="BMI", y=NULL)+
theme_light()+
#theme(axis.text.x = element_text(angle = 60, hjust=1))
surgery %>%
ggplot(aes(x=asa_status))+
geom_density(fill="steelblue", color="black", alpha=0.6, na.rm = T)+
facet_wrap(~asa_status)+ #new ; split the plot into two automatically in columns
labs(title = "Distribution of BMI", x="BMI", y=NULL)+
theme_light()
#theme(axis.text.x = element_text(angle = 60, hjust=1))
surgery %>%
group_by(ahrq_ccs) %>%
summarise(ccsmort30rate=mean(ccsmort30rate)) %>%
arrange(desc(ccsmort30rate)) %>%
slice_max(ccsmort30rate, n=5) #REVIEW SLICE
surgery %>%
group_by(ahrq_ccs) %>%
summarise(ccscomplicationrate=mean(ccscomplicationrate)) %>%
arrange(desc(ccscomplicationrate)) %>%
slice_max(ccscomplicationrate, n=5)
surgery %>%
select(ahrq_ccs, ccsmort30rate, ccscomplicationrate) %>%
filter(ahrq_ccs %in% c("Colorectal resection", "Small bowel resection", "Gastrectomy; partial and total", "Endoscopy and endoscopic biopsy of the urinary tract", "Spinal fusion", "Nephrectomy; partial or complete")) %>%
group_by(ahrq_ccs) %>%
summarise(ccsmort30rate=mean(ccsmort30rate),
ccscomplicationrate=mean(ccscomplicationrate))
surgery %>%
ggplot(aes(x=ahrq_ccs, y=ccsmort30rate, group=ahrq_ccs))+
geom_col(position="dodge", fill="steelblue", alpha=0.6)+
coord_flip()+
labs(title="30-Day Mortality by Procedure",
x=NULL,
y="Rate")+
theme_light()
surgery_new <- surgery %>%
mutate(mort30_n = ifelse(mort30 == "Yes", 1, 0),
complication_n = ifelse(complication =="Yes", 1, 0)) %>%
group_by(month) %>%
summarise(n_deaths=sum(mort30_n),
n_comp=sum(complication_n))
surgery_new
surgery %>% tabyl(month, mort30)
surgery %>% tabyl(month, complication)
surgery_new %>%
ggplot(aes(x=month, y=n_deaths))+
geom_col(alpha=0.8, fill="steelblue", color="black")+
labs(title="30-Day Mortality by Month",
x=NULL,
y="Rate")+
scale_x_discrete(limits=c("Jan","Feb","Mar", "Apr", "May", "Jun", "Jul", "Aug", "Sep", "Oct", "Nov", "Dec"))+
theme_light()
knitr::opts_chunk$set(echo = TRUE)
library(tidyverse)
library(janitor)
library(skimr)
library(naniar)
library(visdat)
library(here)
library(palmerpenguins)
library(RColorBrewer)
library(paletteer)
options(scipen=999) #cancels the use of scientific notation for the session
print(penguins)
penguins %>%
filter(species=="Adelie") %>%
summarize(mean_bill_length=mean(bill_length_mm, na.rm = T),
mean_bill_depth=mean(bill_depth_mm, na.rm = T),
mean_flippper_length=mean(flipper_length_mm, na.rm = T),
mean_body_mass=mean(body_mass_g, na.rm = T),
n=n())
penguins %>%
summarize(distinct_species = n_distinct(species),
distinct_island = n_distinct(island),
distinct_sex = n_distinct(sex))
penguins %>%
summarize(across(c(species, island, sex), n_distinct))
penguins %>%
summarize(across(contains("mm"), mean, na.rm=T))
heartrate <- read_csv("data/heartrate.csv")
colors <- paletteer::palettes_d_names
colors
my_palette <- paletteer_d("vangogh::SunflowersMunich")
barplot(rep(1,6), axes=FALSE, col=my_palette)
knitr::opts_chunk$set(echo = TRUE)
penguins %>%
group_by(island) %>%
summarize(mean_body_mass_g=mean(body_mass_g, na.rm=T)) # remember to remove those NA's!
ggplot(data=homerange, #specify the data
mapping=aes(x=log10.mass, y=log10.hra))+ #map the aesthetics
geom_point() #add the plot type; this is a scatterplot
knitr::opts_chunk$set(echo = TRUE)
library("tidyverse")
library("janitor")
library("naniar")
surgery <- read_csv("data/surgery.csv")
glimpse(surgery) #answer
surgery %>%
#filter(asa_status!="NA") %>%
ggplot(aes(x=asa_status, fill=asa_status))+
geom_bar(color="black", alpha=0.6)+
labs(title = "ASA Status of Participants", x = "ASA", y="# Participants")+
theme_light()
surgery %>%
filter(asa_status!="NA") %>% #remove the NAs in asa_status
ggplot(aes(x=asa_status, fill=asa_status))+
geom_bar(color="black", alpha=0.6)+
labs(title = "ASA Status of Participants", x = "ASA", y="# Participants")+
theme_light()
surgery %>%
ggplot(aes(x=asa_status))+
geom_density(fill="steelblue", color="black", alpha=0.6, na.rm = T)+ #creates smoothed versions of histograms
facet_wrap(~asa_status)+ #new ; split the plot
labs(title = "Distribution of BMI", x="BMI", y=NULL)+
theme_light()
library("tidyverse")
library("janitor")
library("naniar")
sharks <- read_csv("data/SharkIncidents_1950_2022_220302.csv") %>% clean_names()
glimpse(sharks) #this is the structure of the data
sharks #This data is in wide format!
sharks %>%
naniar::miss_var_summary()
library("tidyverse")
library("janitor")
library("naniar")
global_sharks <- read_csv("data/global-shark-attack.csv") %>% clean_names()
glimpse(global_sharks)
global_sharks %>%
naniar::miss_var_summary()
global_sharks %>%
group_by(country) %>%
top_n(10, n)
global_sharks %>%
group_by(country) %>%
top_n(10, country)
#summarise(n = n()) %>%
#ggplot(aes(x=reorder(county, n), y=n)) +
#geom_col(fill = "#0099f9", alpha=0.8)+
#labs(title="Shark Incidents by County (1950-2022)",
#    x=NULL,
#    y="n") +
#theme(axis.text.x = element_text(angle = 60, hjust = 1),
#     plot.title = element_text(size = 14, face="bold"))+
# geom_text(aes(label = n), vjust = -0.2, size = 3, color = "black")
global_sharks %>%
group_by(country) %>%
top_n(10, country) %>%
summarise(n = n())
#ggplot(aes(x=reorder(county, n), y=n)) +
#geom_col(fill = "#0099f9", alpha=0.8)+
#labs(title="Shark Incidents by County (1950-2022)",
#    x=NULL,
#    y="n") +
#theme(axis.text.x = element_text(angle = 60, hjust = 1),
#     plot.title = element_text(size = 14, face="bold"))+
# geom_text(aes(label = n), vjust = -0.2, size = 3, color = "black")
global_sharks %>%
group_by(country) %>%
top_n(10, country) %>%
summarise(n = n()) %>%
ggplot(aes(x=reorder(country, n), y=n)) +
geom_col(fill = "violetred", alpha=0.8)+
labs(title="Shark Incidents by County (1950-2022)",
x=NULL,
y="n") +
theme(axis.text.x = element_text(angle = 60, hjust = 1),
plot.title = element_text(size = 14, face="bold"))+
geom_text(aes(label = n), vjust = -0.2, size = 3, color = "black")
global_sharks %>%
count(country) %>%
arrange(desc(n))
global_sharks %>%
count(country) %>%
top_n(10, n) %>%
ggplot(aes(x=reorder(country,n), y=n))+
geom_col()+
coord_flip()
global_sharks %>%
count(country) %>%
top_n(10, n) %>%
ggplot(aes(x=reorder(country,n), y=n))+
geom_col(fill = "violetred", alpha=0.8)+
coord_flip()
global_sharks %>%
count(country) %>%
top_n(10, n) %>%
ggplot(aes(x=reorder(country,n), y=n))+
geom_col(fill = "violetred", alpha=0.8)+
coord_flip()+
labs(title="Shark Incidents by County (1950-2022)",
x=NULL,
y="n") +
theme(axis.text.x = element_text(angle = 60, hjust = 1),
plot.title = element_text(size = 14, face="bold"))+
geom_text(aes(label = n), vjust = -0.2, size = 3, color = "black")
global_sharks %>%
count(country) %>%
top_n(10, n) %>%
ggplot(aes(x=reorder(country,n), y=n))+
geom_col(fill = "violetred", alpha=0.8)+
coord_flip()+
labs(title="Shark Incidents by Country (1950-2022)",
x=NULL,
y="n") +
theme(axis.text.x = element_text(angle = 60, hjust = 1),
plot.title = element_text(size = 14, face="bold"))+
geom_text(aes(label = n), vjust = -0.2, size = 3, color = "black")
global_sharks %>%
group_by(month) %>%
summarise(total=n(), .groups='keep') %>%
ggplot(aes(x=as_factor(month), y=total))+
geom_col(fill = "darkgreen", alpha=0.5)+
labs(title="Shark Incidents by Month",
x="Month",
y="n")+
theme(plot.title = element_text(size = 14, face="bold"))
View(global_sharks)
global_sharks %>%
group_by(date) %>%
summarise(total=n(), .groups='keep') %>%
ggplot(aes(x=as_factor(date), y=total))+
geom_col(fill = "darkgreen", alpha=0.5)+
labs(title="Shark Incidents by Month",
x="Month",
y="n")+
theme(plot.title = element_text(size = 14, face="bold"))
global_sharks %>%
group_by(date) %>%
summarise(total=n(), .groups='keep') %>%
ggplot(aes(x=as_factor(date), y=total))+
#geom_col(fill = "darkgreen", alpha=0.5)+
#labs(title="Shark Incidents by Month",
#   x="Month",
#   y="n")+
# theme(plot.title = element_text(size = 14, face="bold"))
global_sharks %>%
group_by(date) %>%
summarise(total=n(), .groups='keep') %>%
ggplot(aes(x=as_factor(date), y=total))
global_sharks %>%
group_by(date) %>%
summarise(total=n(), .groups='keep') %>%
#ggplot(aes(x=as_factor(date), y=total))
#geom_col(fill = "darkgreen", alpha=0.5)+
#labs(title="Shark Incidents by Month",
#   x="Month",
#   y="n")+
# theme(plot.title = element_text(size = 14, face="bold"))
global_sharks %>%
group_by(date) %>%
summarise(total=n(), .groups='keep')
#ggplot(aes(x=as_factor(date), y=total))
#geom_col(fill = "darkgreen", alpha=0.5)+
#labs(title="Shark Incidents by Month",
#   x="Month",
#   y="n")+
# theme(plot.title = element_text(size = 14, face="bold"))
global_sharks %>%
separate(date, into=c("year", "month", "day"), sep="-")
global_sharks %>%
group_by(date) %>%
summarise(total=n(), .groups='keep') %>%
ggplot(aes(x=as_factor(month), y=total))+
geom_col(fill = "darkgreen", alpha=0.5)+
labs(title="Shark Incidents by Month",
x="Month",
y="n")+
theme(plot.title = element_text(size = 14, face="bold"))
global_sharks %>%
group_by(date) %>%
summarise(total=n(), .groups='keep') %>%
ggplot(aes(x=as_factor(month), y=total))+
geom_col(fill = "darkgreen", alpha=0.5)+
labs(title="Shark Incidents by Month",
x="Month",
y="n")
global_sharks %>%
group_by(date) %>%
summarise(total=n(), .groups='keep') %>%
ggplot(aes(x=as_factor(month), y=total))+
geom_col(fill = "darkgreen")+
labs(title="Shark Incidents by Month",
x="Month",
y="n")
global_sharks %>%
group_by(date) %>%
summarise(total=n(), .groups='keep') %>%
ggplot(aes(x=as_factor(month), y=total))+
geom_col(fill = "blue")+
labs(title="Shark Incidents by Month",
x="Month",
y="n")
global_sharks %>%
group_by(date) %>%
summarise(total=n(), .groups='keep') %>%
ggplot(aes(x=as_factor(month), y=total))+
geom_col(fill = "#0099f9", alpha=0.8)+
labs(title="Shark Incidents by Month",
x="Month",
y="n")+
theme(plot.title = element_text(size = 14, face="bold"))
global_sharks %>%
group_by(month) %>%
summarise(total=n(), .groups='keep') %>%
ggplot(aes(x=as_factor(month), y=total))+
geom_col(fill = "#0099f9", alpha=0.8)+
labs(title="Shark Incidents by Month",
x="Month",
y="n")+
theme(plot.title = element_text(size = 14, face="bold"))
global_sharks_new %>%
separate(date, into=c("year", "month", "day"), sep="-")
global_sharks_new <- global_sharks %>%
separate(date, into=c("year", "month", "day"), sep="-")
global_sharks_new %>%
group_by(month) %>%
summarise(total=n(), .groups='keep') %>%
ggplot(aes(x=as_factor(month), y=total))+
geom_col(fill = "#0099f9", alpha=0.8)+
labs(title="Shark Incidents by Month",
x="Month",
y="n")+
theme(plot.title = element_text(size = 14, face="bold"))
global_sharks_new %>%
count(activity) %>%
arrange(desc(n))
global_sharks_new %>%
filter(activity)
global_sharks_new %>%
top_n(5, activity) #%>%
# ggplot(aes(x=common.name, y=log10.mass))+
# geom_col()+ #use when you have x and y axis
# coord_flip()
global_sharks %>%
filter(date!="NA") %>%
top_n(5, activity) #%>%
global_sharks %>%
#filter(date!="NA") %>%
#top_n(5, activity) #%>%
# ggplot(aes(x=common.name, y=log10.mass))+
# geom_col()+ #use when you have x and y axis
# coord_flip()
global_sharks #%>%
#filter(date!="NA") %>%
#top_n(5, activity) #%>%
# ggplot(aes(x=common.name, y=log10.mass))+
# geom_col()+ #use when you have x and y axis
# coord_flip()
global_sharks %>%
filter(date!="NA") %>%
#top_n(5, activity) #%>%
# ggplot(aes(x=common.name, y=log10.mass))+
# geom_col()+ #use when you have x and y axis
# coord_flip()
global_sharks %>%
filter(date!="NA") #%>%
global_sharks %>%
top_n(5, activity) #%>%
# ggplot(aes(x=common.name, y=log10.mass))+
# geom_col()+ #use when you have x and y axis
# coord_flip()
global_sharks_new %>%
top_n(5, activity) #%>%
# ggplot(aes(x=common.name, y=log10.mass))+
# geom_col()+ #use when you have x and y axis
# coord_flip()
global_sharks_new %>%
count(activity) %>%
arrange(desc(n))
global_sharks_new %>%
filter(activity!="NA") %>%
top_n(5, activity) #%>%
# ggplot(aes(x=common.name, y=log10.mass))+
# geom_col()+ #use when you have x and y axis
# coord_flip()
global_sharks_new %>%
filter(activity!="NA") %>%
top_n(5, n) #%>%
global_sharks %>%
filter(sex!="NA") %>%
group_by(sex) #%>%
#summarise(mean_length=mean(total_length_cm, na.rm=T),
n=n(), .groups='keep')
global_sharks %>%
filter(sex!="NA") %>%
group_by(sex) #%>%
#summarise(mean_length=mean(total_length_cm, na.rm=T),
# n=n(), .groups='keep')
global_sharks %>%
filter(sex!="NA") %>%
ggplot(aes(x=sex, y=fatal_y_n, fill=sex))+
geom_boxplot(alpha=0.8)+
labs(title="Fatalities from Sharks by Sex",
x="Sex",
y="Fatality")
