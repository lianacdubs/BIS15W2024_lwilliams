---
title: "code_MT1"
output: html_document
date: "2024-01-30"
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
```
#Keyboard Shortcuts 
Insert Pipe Operator Cmd+Shift+M
Knit Document (knitr)	Ctrl+Shift+K	Cmd+Shift+K

Insert chunk (Sweave and Knitr)	Ctrl+Alt+I	Cmd+Option+I
Run all chunks above the current chunk with Command + Option + P on a Mac; Ctrl + Alt + P on Linux and Windows.

Run the current chunk with Command + Option + C or Command + Shift + Enter on a Mac; Ctrl + Alt + C or Ctrl + Shift + Enter on Linux and Windows.

Run the next chunk with Command + Option + N on a Mac; Ctrl + Alt + N on Linux and Windows.

Run all chunks with Command + Option + R or Command + A + Enter on a Mac; Ctrl + Alt + R or Ctrl + A + Enter on Linux and Windows.


**dplyr** is a package in tidyverse
Note: =assignment but, == equal to 

##Syntax
# %>% Piping
passes object on left hand side as first argument (or . argument) of function on righthand side. 
x %>% f(y) is the same as f(x, y) 
```{r}
iris %>% 
  group_by(species) %>% 
  summarize(avg = mean(Sepal.Width)) %>% 
  arrange(avg)
```

#glimpse()
shows all variables, their first value, type, gives number of variables and observations.; information dense summary of tbl data 
```{r}
glimpse(table2)
```
#view() 
puts the table in the environment panel and you can sort ; views like a spreadsheet 
```{r}
view(table2)
```
#arrange()
allows you to sort 
```{r}
table2 %>% 
  arrange(year) #this could also be arrange(year, type)
Ex: 
  arrange(mtcars, mpg) #order rows by values of a column (low to high)
Ex:
  arrange(mtcars, desc(mpg)) #order rows by values of a column (high to low)
```

#select()
include the column names (variables) that you want or you can put a (-) in front of them indicating that you pull out those columns. 
```{r}
table1 %>% 
  select(country, populations)
table1 %>% 
  select(-cases, -year) #select all columns except cases and year 
Ex:
select(iris, contains(".")) #select column whose name contains a character string. 
Ex: 
select(iris, ends_with("length")) #select column whose name ends with a character string. #starts__with is also a command 
Ex: select(iris, sepal.length:petal.width) #select all columns btwn speal.length and petal.width (inclusive)
```
#filter()
Extract rows (observations) that meet specific criteria
```{r}
table1 %>% 
  filter(year == 2000)
table1 %>% 
  filter(year != 2000)
```
#mutate()
create a new column 
```{r}
table1 %>% 
  mutate(fill_it = "with a smile :)") %>% #fill_it is the name of the new variable
  mutate(popul_per_case = population / cases)

table1 %>% 
  mutate(fill_it = "with a smile :)") %>% 
  rename(much_better_name = fill_it)

#mutate() functions take a vector of values and return another vector of values, such as: 
between() #are the values btwn a and b?
```
#group_by()
groups data into rows of the same value of species 
#summarize()
summarize data into a single row of values for each of the groups. 
```{r}
table1 %>% 
  summarize(counting = n())
table1 %>% 
  summarize(sum = sum(population)) #sums all the values in the column 
table1 %>% 
  summarize(average = mean(population))
table1 %>% 
  summarize(avr_popul = mean(population), all_cases = sum(cases), how_many = n())
table1 %>% 
  group_by(cyl, am) %>% 
  summarize(avr_mpg = mean(mpg), avr_hp = mean(hp), count = n())
```
#Distinct() 
pass whatever columns you want and gives distinct rows; remove duplicate rows 
```{r}
distinct(iris)
```

dplyr::sample_n (iris, 10, replace = TRUE) #randomly select n rows
#Count()
counts the number of rows with each unique value of variable



**summary functions** this is wha 'summarize()' uses 
Take a vector of values and return a single value, such as: 
dplyr::first #first value of a vector 
dplyr::last #last value of a vector 
dplyr::nth #nth value of a vector 
dplyr::n #number of values in a vector 
dplyr::n_distinct # number of distinct values in a vector 

IQR 
min #min value in a vector 
max 
mean 
median 
var #variance of a vector 
sd #standard deviation from a vector 

#Logic in R 
<
>
==
<=
>=
!=
%in%
is.na
!is.na 
&, |, !, xor, any, all (Boolean Operators)


AND	&	#conditions on both sides need to be satisfied. 
4 == 3 & 1 == 1

4 == 4 & 1 == 1

FALSE

TRUE

OR	|	#requires at least one condition be met on either side of the boolean operator. Note: the output will be TRUE if both conditions are met
4 == 4 | 1 == 1

4 == 3 | 1 == 1

4 == 3 | 1 == 2

TRUE

TRUE

FALSE

NOT	!	#reverse the outcome of a condition
!(4 == 3) #!(false) = true

!(4 == 4)

TRUE

FALSE

```{r}
library(dplyr)
library(readr)
billboard100 <- read_csv("billboard100.csv")
```

# Piping %>%
```{r}
head(billboard100, 10)

billboard100 %>% head(10)
10 %>% head(billboard100, .)
```
# Select
```{r}
billboard100 %>%
  select(date, rank, song, artist, 'weeks-on-board')

billboard100 %>%
  select(date:artist, weeks_popular='weeks-on-board')

billboard100 %>%
  select(-'last-week', -'peak-rank')
```
# Mutate
```{r}
billboard100 %>%
  select(date:artist, weeks_popular='weeks-on-board') %>%
  mutate(is_collab = grepl('Featuring', artist)) %>%
  select(artist, is_collab, everything())
```
# Filter
```{r}
billboard100 %>%
  select(date:artist, weeks_popular='weeks-on-board') %>%
  filter(weeks_popular >= 20, artist == 'Drake' | artist == 'Taylor Swift')
```

# Distinct
```{r}
billboard100 %>%
  select(date:artist, weeks_popular='weeks-on-board') %>%
  filter(artist == 'Drake') %>%
  distinct(song)

billboard100 %>%
  select(date:artist, weeks_popular='weeks-on-board') %>%
  filter(artist == 'Drake') %>%
  distinct(song) %>%
  .$song
```

# Group_by & Summarise
```{r}
billboard100 %>%
  select(date:artist, weeks_popular='weeks-on-board') %>%
  filter(artist == 'Drake') %>%
  group_by(song) %>%
  summarise(total_weeks_popular = max(weeks_popular))
```
# Arrange
```{r}
billboard100 %>%
  select(date:artist, weeks_popular='weeks-on-board') %>%
  filter(artist == 'Drake') %>%
  group_by(song) %>%
  summarise(total_weeks_popular = max(weeks_popular)) %>%
  arrange(desc(total_weeks_popular), song) %>%
  head(10)
```

# Count
```{r}
billboard100 %>%
  select(date:artist, weeks_popular='weeks-on-board')  %>%
  count(artist) %>%
  arrange(desc(n))
```

#This document includes all the examples from the warmup + HW code we have done. Please refer to the specific LAB for practice code! 
HW #1: RMarkdown (lab 1)
Github is a website where programmers store and share code in repositories. It is also a place where scientists upload code such that the calculations they make are open and repeatable.  

**3. Navigate to my [BIS15L](https://github.com/jmledford3115/BIS15LW2021_jledford) repository on GitHub. Notice that near the bottom there is a nice, clean description of the repository. You want this on your repository! It is built by making edits to the `README.md` file using the RMarkdown conventions. Edit your repository's `README.md` file so that you have a clean informative description, including your email address. Be creative! You don't need to just copy mine. There are lots of examples online.**  

**4. Calculate the following expressions. Be sure to include each one in a separate code chunk.**  
```{r}
5 - 3 * 2  
```

```{r}
8 / 2 ** 2 
```

**5. Did any of the results in #4 surprise you? Write two programs that calculate each expression such that the result for the first example is 4 and the second example is 16.**    
I notice that order of operations for mathematical expression applies.  
```{r}
(5 - 3) * 2 
```

```{r}
(8 / 2) * 2 
```

**6. `Objects` in R are a way in which we can store data or operations. We will talk more about objects next week. For now, make a new object `pi` as 3.14159265359 by running the following code chunk. You should now see the object `pi` in the environment window in the top right.**  
```{r}
pi <- 3.14159265359
```

**7. Let's say we want to multiply `pi` by 2. Using the same arithmetic principles that we just learned, write a code chunk that performs this operation using the object we created.**  

```{r}
pi*2
```

**8. In order to get help with any command in R, just type a `?` in front the command of interest. Practice this by running the following code chunk.**  
```{r}
?mean
```

**9. Let's calculate the mean for the numbers 2, 8, 6, 4, 9, 10. I have built an object `x` for you below so all you need to do is run the first code chunk and then create a second code chunk that shows the calculation. Give it a try!**  
```{r}
x <- c(2, 8, 6, 6, 7, 4, 9, 9, 9, 10)
```

```{r}
mean(x)
```

**10. Repeat the procedure above, but this time calculate the median.**  
```{r}
median(x)
```
HW #2: Data Structures (lab 2)
1. What is a vector in R?  
_A vector in R is a type of data structure that is ordered and consists of elements, usually of the same class._  

2. What is a data matrix in R?  
_A data matrix is a series of stacked vectors arranged like a data table._  

3. Below are data collected by three scientists (Jill, Steve, Susan in order) measuring temperatures of eight hot springs. Run this code chunk to create the vectors.  
```{r}
spring_1 <- c(36.25, 35.40, 35.30)
spring_2 <- c(35.15, 35.35, 33.35)
spring_3 <- c(30.70, 29.65, 29.20)
spring_4 <- c(39.70, 40.05, 38.65)
spring_5 <- c(31.85, 31.40, 29.30)
spring_6 <- c(30.20, 30.65, 29.75)
spring_7 <- c(32.90, 32.50, 32.80)
spring_8 <- c(36.80, 36.45, 33.15)
```

4. Build a data matrix that has the springs as rows and the columns as scientists.  
```{r}
springs <- c(spring_1, spring_2, spring_3, spring_4, spring_5, spring_6, spring_7, spring_8)
springs
```

```{r}
springs_matrix <- matrix(springs, nrow=8, byrow = T)
springs_matrix
```

5. The names of the springs are 1.Bluebell Spring, 2.Opal Spring, 3.Riverside Spring, 4.Too Hot Spring, 5.Mystery Spring, 6.Emerald Spring, 7.Black Spring, 8.Pearl Spring. Name the rows and columns in the data matrix. Start by making two new vectors with the names, then use `colnames()` and `rownames()` to name the columns and rows.
```{r}
scientists <- c("Jill", "Steve", "Susan")
```

```{r}
springs <- c("Bluebell Spring", "Opal Spring", "Riverside Spring", "Too Hot Spring", "Mystery Spring", "Emerald Spring", "Black Spring", "Pearl Spring")
```

```{r}
colnames(springs_matrix) <- scientists
rownames(springs_matrix) <- springs
springs_matrix
```

6. Calculate the mean temperature of all eight springs.
```{r}
mean_vector <- rowMeans(springs_matrix)
mean_vector
```

7. Add this as a new column in the data matrix.  
```{r}
springs_matrix2 <- cbind(springs_matrix, mean_vector)
springs_matrix2
```

8. Show Susan's value for Opal Spring only.
```{r}
springs_matrix2[2,3]
```

9. Calculate the mean for Jill's column only.  
```{r}
Jill <- springs_matrix2[ ,1]
mean(Jill)
```

10. Use the data matrix to perform one calculation or operation of your interest.
HW #3. Data Frames (lab 3)
## Load the tidyverse
```{r message=FALSE, warning=FALSE}
library(tidyverse)
```

### Mammals Sleep  
1. For this assignment, we are going to use built-in data on mammal sleep patterns. From which publication are these data taken from? Since the data are built-in you can use the help function in R. The name of the data is `msleep`.  
```{r}
?msleep
```

2. Store these data into a new data frame `sleep`.  
```{r}
sleep <- msleep
is.data.frame(msleep)
```

3. What are the dimensions of this data frame (variables and observations)? How do you know? Please show the *code* that you used to determine this below.  
```{r}
glimpse(sleep)
```

4. Are there any NAs in the data? How did you determine this? Please show your code.  
```{r}
anyNA(sleep)
```

5. Show a list of the column names is this data frame.
```{r}
names(sleep)
```

6. How many herbivores are represented in the data?  
```{r}
table(sleep$vore)
```

7. We are interested in two groups; small and large mammals. Let's define small as less than or equal to 1kg body weight and large as greater than or equal to 200kg body weight. Make two new dataframes (large and small) based on these parameters.
```{r}
small <- filter(sleep, bodywt<=1)
large <- filter(sleep, bodywt>=200)
```

8. What is the mean weight for both the small and large mammals?
```{r}
mean(small$bodywt, na.rm = T)
```

```{r}
mean(large$bodywt, na.rm = T)
```

9. Using a similar approach as above, do large or small animals sleep longer on average?  

_Small animals have a sleep_total average of 12.65_
```{r}
mean(large$sleep_total, na.rm = T)
```

```{r}
mean(small$sleep_total, na.rm = T)
```

10. Which animal is the sleepiest among the entire dataframe?
```{r}
max(sleep$sleep_total)
```

```{r}
filter(sleep, sleep_total==19.9)
```
HW #4: Dplyr Practice (lab 4)
HW #5: Dplyr Superhero (lab 6.2)
## Load the libraries
```{r}
library("tidyverse")
library("janitor")
```

## Load the superhero data
These are data taken from comic books and assembled by fans. The include a good mix of categorical and continuous data.  Data taken from: https://www.kaggle.com/claudiodavi/superhero-set  

Check out the way I am loading these data. If I know there are NAs, I can take care of them at the beginning. But, we should do this very cautiously. At times it is better to keep the original columns and data intact.  
```{r}
#superhero_info <- read_csv("data/heroes_information.csv", na = c("", "-99", "-"))
#superhero_powers <- read_csv("data/super_hero_powers.csv", na = c("", "-99", "-"))
```

## Data tidy
1. Some of the names used in the `superhero_info` data are problematic so you should rename them here. Before you do anything, first have a look at the names of the variables. You can use `rename()` or `clean_names()`.    
```{r}
names(superhero_info)
```

```{r}
names(superhero_powers)
```

```{r}
superhero_powers <- clean_names(superhero_powers)
```

```{r}
superhero_info <- clean_names(superhero_info)
```

## `tabyl`
The `janitor` package has many awesome functions that we will explore. Here is its version of `table` which not only produces counts but also percentages. Very handy! Let's use it to explore the proportion of good guys and bad guys in the `superhero_info` data.  
```{r}
tabyl(superhero_info, alignment)
```

1. Who are the publishers of the superheros? Show the proportion of superheros from each publisher. Which publisher has the highest number of superheros?  
```{r}
tabyl(superhero_info, publisher)
```

2. Notice that we have some neutral superheros! Who are they? List their names below.  
```{r}
neutral <- superhero_info %>% filter(alignment=="neutral")
```

```{r}
neutral$name
```

## `superhero_info`
3. Let's say we are only interested in the variables name, alignment, and "race". How would you isolate these variables from `superhero_info`?
```{r}
superhero_info %>% select("name", "alignment", "race")
```

## Not Human
4. List all of the superheros that are not human.
```{r}
not_human <- superhero_info %>% filter(race!="Human")
```

```{r}
not_human$name
```

## Good and Evil
5. Let's make two different data frames, one focused on the "good guys" and another focused on the "bad guys".
```{r}
good_guys <- 
  superhero_info %>% 
  filter(alignment=="good")
```

```{r}
bad_guys <- 
  superhero_info %>% 
  filter(alignment=="bad")
```

6. For the good guys, use the `tabyl` function to summarize their "race".
```{r}
good_guys %>% tabyl(race)
```

7. Among the good guys, Who are the Vampires?
```{r}
good_guys %>% filter(race=="Vampire")
```

8. Among the bad guys, who are the male humans over 200 inches in height?
```{r}
bad_guys %>% filter(race=="Human" & gender=="Male" & height>=150)
```

9. Are there more good guys or bad guys with green hair?  
```{r}
good_guys %>% 
  filter(hair_color=="Green")
```

```{r}
bad_guys %>% 
  filter(hair_color=="Green")
```

```{r}
table(superhero_info$hair_color, superhero_info$alignment)
```

```{r}
superhero_info %>% 
  tabyl(hair_color, alignment)
```

```{r}
superhero_info %>% 
  filter(hair_color=="Green") %>% 
  group_by(alignment) %>% 
  summarise(n=n())
```

```{r}
superhero_info %>% 
  filter(hair_color=="Green") %>% 
  count(hair_color, alignment)
```

10. Let's explore who the really small superheros are. In the `superhero_info` data, which have a weight less than 50? Be sure to sort your results by weight lowest to highest.  
```{r}
superhero_info %>% 
  filter(weight<50) %>% 
  arrange(weight)
```

11. Let's make a new variable that is the ratio of height to weight. Call this variable `height_weight_ratio`.    
```{r}
superhero_info <- 
  superhero_info %>% 
  mutate(height_weight_ratio=height/weight)
```

12. Who has the highest height to weight ratio?  
```{r}
superhero_info %>% 
  arrange(desc(height_weight_ratio))
```

## `superhero_powers`
Have a quick look at the `superhero_powers` data frame.  

13. How many superheros have a combination of agility, stealth, super_strength, stamina?
```{r}
superhero_powers %>%
  filter(agility & stealth & super_strength & stamina) %>%
  select(hero_names, agility, stealth, super_strength, stamina)
```

```{r}
superhero_powers %>% 
  select(hero_names, agility, stealth, super_strength, stamina) %>% 
  filter(agility==TRUE & stealth==TRUE & super_strength==TRUE & stamina==TRUE)
```

## Your Favorite
14. Pick your favorite superhero and let's see their powers!  
```{r}
superhero_powers %>%
  filter(hero_names == "Darth Vader") %>%
  select_if(all)  # Selects all columns where all values are TRUE
```

15. Can you find your hero in the superhero_info data? Show their info!  
```{r}
superhero_info %>% 
  filter(name=="Darth Vader")
```
HW #6: Summary Functions (HW7)
## Load the libraries
```{r message=FALSE, warning=FALSE}
library(tidyverse)
library(janitor)
library(skimr)
```

For this assignment we are going to work with a large data set from the [United Nations Food and Agriculture Organization](http://www.fao.org/about/en/) on world fisheries. These data are pretty wild, so we need to do some cleaning. First, load the data.  

Load the data `FAO_1950to2012_111914.csv` as a new object titled `fisheries`.
```{r}
fisheries <- readr::read_csv(file = "data/FAO_1950to2012_111914.csv")
```

1. Do an exploratory analysis of the data (your choice). What are the names of the variables, what are the dimensions, are there any NA's, what are the classes of the variables?  
```{r}
glimpse(fisheries)
```

```{r}
head(fisheries)
```

```{r}
tail(fisheries)
```

```{r}
str(fisheries)
```

2. Use `janitor` to rename the columns and make them easier to use. As part of this cleaning step, change `country`, `isscaap_group_number`, `asfis_species_number`, and `fao_major_fishing_area` to data class factor. 
```{r}
fisheries <- janitor::clean_names(fisheries)
names(fisheries)
```

```{r}
fisheries$country <- as.factor(fisheries$country)
fisheries$isscaap_group_number <- as.factor(fisheries$isscaap_group_number)
fisheries$asfis_species_number <- as.factor(fisheries$asfis_species_number)
fisheries$fao_major_fishing_area <- as.factor(fisheries$fao_major_fishing_area)
```

Here is a nice alternate way to change classes using dplyr.  
```{r}
fisheries <- 
  fisheries %>% mutate(across(c(country, isscaap_group_number, asfis_species_number, fao_major_fishing_area), as_factor))
```

We need to deal with the years because they are being treated as characters and start with an X. We also have the problem that the column names that are years actually represent data. We haven't discussed tidy data yet, so here is some help. You should run this ugly chunk to transform the data for the rest of the homework. It will only work if you have used janitor to rename the variables in question 2!  
```{r}
fisheries_tidy <- fisheries %>% 
  pivot_longer(-c(country,common_name,isscaap_group_number,isscaap_taxonomic_group,asfis_species_number,asfis_species_name,fao_major_fishing_area,measure),
               names_to = "year",
               values_to = "catch",
               values_drop_na = TRUE) %>% 
  mutate(year= as.numeric(str_replace(year, 'x', ''))) %>% 
  mutate(catch= str_replace(catch, c(' F'), replacement = '')) %>% 
  mutate(catch= str_replace(catch, c('...'), replacement = '')) %>% 
  mutate(catch= str_replace(catch, c('-'), replacement = '')) %>% 
  mutate(catch= str_replace(catch, c('0 0'), replacement = ''))

fisheries_tidy$catch <- as.numeric(fisheries_tidy$catch)
```

3. How many countries are represented in the data? Provide a count and list their names.
```{r}
fisheries_tidy %>% 
  summarize(ncountries = n_distinct(country))
```

```{r}
levels(fisheries_tidy$country)
```

4. Refocus the data only to include country, isscaap_taxonomic_group, asfis_species_name, asfis_species_number, year, catch.
```{r}
fisheries_tidy_focused <- fisheries_tidy %>% 
  select(country, isscaap_taxonomic_group, asfis_species_name, asfis_species_number, year, catch)
fisheries_tidy_focused
```

5. Based on the asfis_species_number, how many distinct fish species were caught as part of these data?
```{r}
fisheries_tidy_focused %>% 
  summarize(n_taxa=n_distinct(asfis_species_number))
```

6. Which country had the largest overall catch in the year 2000?
```{r}
fisheries_tidy_focused %>% 
  filter(year==2000) %>%
  group_by(country) %>% 
  summarize(catch_total=sum(catch, na.rm=T)) %>% 
  arrange(desc(catch_total))
```

7. Which country caught the most sardines (_Sardina pilchardus_) between the years 1990-2000?
```{r}
fisheries_tidy_focused %>% 
  filter(asfis_species_name== "Sardina pilchardus") %>% 
  filter(year>=1990 & year<=2000) %>% 
  group_by(country) %>% 
  summarize(catch_total=sum(catch, na.rm=T)) %>% 
  arrange(desc(catch_total))
```

Double check
```{r}
sardines1 <- fisheries_tidy_focused %>% 
  filter(stringr::str_detect(asfis_species_name, "Sardina")) %>% 
  filter(year>=1990 & year<=2000)
```

```{r}
sardines1 %>% 
  group_by(country) %>% 
  summarize(catch_total=sum(catch, na.rm=T)) %>% 
  arrange(desc(catch_total))
```

Triple check
```{r}
sardines2 <- fisheries_tidy_focused %>% 
  filter(stringr::str_detect(isscaap_taxonomic_group, "sardines")) %>% 
  filter(year>=1990 & year<=2000)
```

```{r}
sardines2 %>% 
  group_by(country) %>% 
  summarize(catch_total=sum(catch, na.rm=T)) %>% 
  arrange(desc(catch_total))
```

8. Which five countries caught the most cephalopods between 2008-2012?
```{r}
fisheries_tidy_focused %>% 
  filter(str_detect(isscaap_taxonomic_group, "Squids")) %>% 
  filter(year>=2008 & year<=2012) %>% 
  group_by(country) %>% 
  summarize(catch_total=sum(catch, na.rm=T)) %>% 
  arrange(desc(catch_total))
```

```{r}
fisheries_tidy_focused %>% 
  filter(isscaap_taxonomic_group=="Squids, cuttlefishes, octopuses") %>% 
  count(asfis_species_name, sort=T)
```

9. Which species had the highest catch total between 2008-2012? (hint: Osteichthyes is not a species)
```{r}
fisheries_tidy_focused %>% 
  filter(year>=2008 & year<=2012)%>% 
  group_by(asfis_species_name) %>% 
  summarize(catch_total=sum(catch, na.rm=T)) %>% 
  arrange(desc(catch_total))
```

10. Use the data to do at least one analysis of your choice.
#Lab 3 Warmup
### 1. Plant Height Vector.
```{r}
plant_height <- c(30.7, 37.6, 28.4, NA, 33.2)
```

### 2. Plant Weight Vector.
```{r}
plant_weight <- c(4, 5.2, 3.7, NA, 4.6)
```

### 3. Labels for data matrix.
```{r}
samples <- c("plant1", "plant2", "plant3", "plant4", "plant5")
measured <- c("height", "weight")
```

### 4. Combine data for height and weight.
```{r}
plant_experiment <- c(plant_height, plant_weight)
```

### 5. Build the data matrix.
```{r}
plant_experiment_matrix <- matrix(plant_experiment, nrow = 5, byrow = F)
```

### 6. Name the columns and rows.
```{r}
colnames(plant_experiment_matrix) <- measured
rownames(plant_experiment_matrix) <- samples
```

### 7. Calculate the means of each column.
```{r}
plant_means <- colMeans(plant_experiment_matrix, na.rm=T)
```

### 8. Add this as a new row.
```{r}
plant_experiment_matrix_final <- rbind(plant_experiment_matrix, plant_means)
```

### 9. Print the matrix.
```{r}
plant_experiment_matrix_final
```

#Lab 4 Warmup 
## 1. Load the libraries
```{r}
library(tidyverse)
library(palmerpenguins)
```

## 2. What are the dimensions of `penguins`?
```{r}
dim(penguins)
```

## 3. What are the names of the variables?
```{r}
names(penguins)
```
```{r}
glimpse(penguins)
```
## 4. How many individuals are on each island?
```{r}
penguins <- penguins
```

```{r}
table(penguins$island)
```

```{r}
summary(penguins$island)
```

```{r}
mean(penguins$body_mass_g, na.rm=T)
```
# Lab 5 Intro
```{r}
#1. Load the tidyverse 
#library(tidyverse)

#2. Load the fish data 
# fish <- readr::read_csv("data/Gaeta_etal_CLC_data.csv")

#3. Transform the fish data to only include the variables lakeid and length.  Store this as a new dataframe called "fishlength".  
# names(fish) 
# fishlength <- select(fish, "lakeid", "length")

#4. Filter the `fish` data to include the samples from lake "BO".
# glimpse(fish) ;from this we find the class lakeid is chr 
# filter(fish, lakeid == "BO")

#5. Calculate the mean length of fish from lake "BO".
# fish_bo <- filter(fish, lakeid == "BO")
# mean(fish_bo$length)
```

#Lab 5 WarmUp
```{r}
library("tidyverse")
```


## 1. Load the data
```{r}
getwd()
```

```{r}
fish <- read_csv("data/Gaeta_etal_CLC_data.csv")
```
## 2. Transform to only include lakeid and length
```{r}
names(fish)
```

```{r}
fishlength <- select(fish, "lakeid", "length")
```

## 3. Filter the fish for lake BO
```{r}
glimpse(fish)
```
```{r}
filter(fish, lakeid=="BO")
```

## 4. Mean length of BO fish
```{r}
fish_bo <- filter(fish, lakeid=="BO")
```

```{r}
mean(fish_bo$length)
```

#Lab 6 WarmUp
## Load the libraries 
```{r}
#library("tidyverse")
#library("janitor")
```

# 1. Load the data 
```{r}
#bison <- readr::read_csv("data/bison.csv")
#bison <- read_csv("data/bison.csv")
```

# 2. Dimensions and structure of the data? 
```{r}
#dim(bison) #Dimensions
```

```{r}
#glimpse(bison) #structure of the data
```
Note: dbl is double floating point therefore its a number. 

#3. We are interested in code, sex, weight, year of birth. Restrict the data to these variables and store the dataframe as a new object.
```{r}
#bison_new <- bison %>%
  #select(animal_code, animal_sex, animal_weight, animal_yob)
```

```{r}
bison_new <- select(bison, "animal_code", "animal_sex", "animal_weight", "animal_yob")
```

#4. Pull out the animals born between 1980-1990  
```{r}
bison_new %>%
  filter(animal_yob>=1980 & animal_yob<=1990)
```

```{r}
bison_yob <- filter(bison_new, animal_yob>=1980 & animal_yob<=1990)
```

#5. How many male and female bison are represented betwen 1980-1990?
```{r}
males <- bison_new %>% #first pull out the males 
  filter(animal_yob>=1980 & animal_yob<=1990) %>%
  filter(animal_sex=="M")
males #there are 21 males based on variables in the table. 

table(males$animal_sex)
```

```{r}
females <- bison_new %>% #first pull out the females 
  filter(animal_yob>=1980 & animal_yob<=1990) %>%
  filter(animal_sex=="F")
females # 

table(females$animal_sex) #There are 414 females 
```


Profs answer to the same question
```{r}
table(bison_yob$animal_sex) #Profs answer
```

```{r}
bison_m <- filter(bison_yob, animal_sex=="M")
bison_f <- filter(bison_yob, animal_sex=="F")
```
#6. Between 1980-1990, were males or females larger on average
```{r}
mean(males$animal_weight)
```

```{r}
mean(females$animal_weight)
```

Profs answer
```{r}
mean(bison_m$animal_weight) #males
```

```{r}
mean(bison_f$animal_weight) #females
```
#Lab 6.2 is the homework! 


#HW 7 Another Method of Getting Answer

## Load the libraries
```{r message=FALSE, warning=FALSE}
library(tidyverse)
library(janitor)
library(skimr)
```

For this assignment we are going to work with a large data set from the [United Nations Food and Agriculture Organization](http://www.fao.org/about/en/) on world fisheries. These data are pretty wild, so we need to do some cleaning. First, load the data.  

Load the data `FAO_1950to2012_111914.csv` as a new object titled `fisheries`.
```{r}
fisheries <- readr::read_csv(file = "data/FAO_1950to2012_111914.csv")
```

1. Do an exploratory analysis of the data (your choice). What are the names of the variables, what are the dimensions, are there any NA's, what are the classes of the variables?  
```{r}
dim(fisheries)
```

```{r}
names(fisheries)
```

```{r}
anyNA(fisheries)
```

```{r}
skim(fisheries)
```

2. Use `janitor` to rename the columns and make them easier to use. As part of this cleaning step, change `country`, `isscaap_group_number`, `asfis_species_number`, and `fao_major_fishing_area` to data class factor. 
```{r}
fisheries <- clean_names(fisheries)
```

We need to deal with the years because they are being treated as characters and start with an X. We also have the problem that the column names that are years actually represent data. We haven't discussed tidy data yet, so here is some help. You should run this ugly chunk to transform the data for the rest of the homework. It will only work if you have used janitor to rename the variables in question 2!  
```{r}
fisheries_tidy <- fisheries %>% 
pivot_longer(-c(country,common_name,isscaap_group_number,isscaap_taxonomic_group,asfis_species_number,asfis_species_name,fao_major_fishing_area,measure),
names_to = "year",
values_to = "catch",
values_drop_na = TRUE) %>% 
mutate(year= as.numeric(str_replace(year, 'x', ''))) %>% 
mutate(catch= str_replace(catch, c(' F'), replacement = '')) %>% 
mutate(catch= str_replace(catch, c('...'), replacement = '')) %>% 
mutate(catch= str_replace(catch, c('-'), replacement = '')) %>% 
mutate(catch= str_replace(catch, c('0 0'), replacement = ''))

fisheries_tidy$catch <- as.numeric(fisheries_tidy$catch)
```

3. How many countries are represented in the data? Provide a count and list their names.
```{r}
fisheries_tidy %>% 
  group_by(country) %>% 
  summarize(n=n()) %>% 
  arrange(desc(n)) #there is 203 countries
```

4. Refocus the data only to include country, isscaap_taxonomic_group, asfis_species_name, asfis_species_number, year, catch.
```{r}
fish <- fisheries_tidy %>% 
  select(country, isscaap_taxonomic_group, asfis_species_name, asfis_species_number, year, catch)
```

5. Based on the asfis_species_number, how many distinct fish species were caught as part of these data?
```{r}
fish %>% 
  group_by(asfis_species_name, asfis_species_number) %>% 
  summarize(n=n(), .groups= 'keep') %>% 
  arrange(desc(n)) #there was 1,551 species
```

6. Which country had the largest overall catch in the year 2000?
```{r}
fish %>% 
  filter(year==2000) %>% 
  arrange(desc(catch)) #the country that had the highest catch is China
```


7. Which country caught the most sardines (_Sardina pilchardus_) between the years 1990-2000?
```{r}
fish %>% 
  filter(between(year, 1990, 2000)) %>% 
  filter(asfis_species_name=="Sardina pilchardus") %>% 
  arrange(desc(catch)) #the country that had the most sardines is Morocco
```

8. Which five countries caught the most cephalopods between 2008-2012?
```{r}
fish %>% 
  filter(between(year, 2008, 2012)) %>% 
  filter(asfis_species_name=="Cephalopoda") %>% 
  arrange(desc(catch)) #the five countries that caught the most cephalopods was India, China, Italy, Spain, and Algeria
```

9. Which species had the highest catch total between 2008-2012? (hint: Osteichthyes is not a species)
```{r}
fish %>% 
  filter(between(year, 2008, 2012)) %>% 
  filter(!asfis_species_name=="Osteichthyes") %>% 
  arrange(desc(catch)) # the species with the highest catch total was Trichiurus lepturus
```

10. Use the data to do at least one analysis of your choice.
```{r}
bh_fish <- fisheries_tidy %>% 
  select(country, common_name, year, catch) %>% 
  filter(country=="Bosnia and Herzegovina") %>% 
  filter(between(year, 1992, 1995)) 
bh_fish
```

```{r}
hist(bh_fish$year)
```